/* 
Copyright Marcus Parsons 2017-2018
This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/
var atf_styles={};function atf(){var e=this;function t(){var t,o,i=[];t=n("#"+e.o.container+"-atf-filterselect").value,o=e.o.caseSensitive?n("#"+e.o.container+"-atf-filtervalue").value:n("#"+e.o.container+"-atf-filtervalue").value.toLowerCase();for(var r=a("#"+e.o.table+" thead > tr > th"),s=0;s<r.length;s++){var l=r[s].innerHTML.trim();i.push(l)}var c=a("#"+e.o.container+"-atf-tbody > tr");if("All"===t)for(s=0;s<c.length;s++){var d=c[s].getElementsByTagName("td"),f=c[s];e:for(var g=0;g<d.length;g++){var b=e.o.caseSensitive?d[g].innerHTML:d[g].innerHTML.toLowerCase();if(b.indexOf(o)>-1){f.classList.remove("hider");break e}g===d.length-1&&f.classList.add("hider")}}else{var u=i.indexOf(t);for(s=0;s<c.length;s++)d=(f=c[s]).getElementsByTagName("td"),(b=!0===e.o.caseSensitive?d[u].innerHTML:d[u].innerHTML.toLowerCase()).indexOf(o)>-1?f.classList.remove("hider"):f.classList.add("hider")}}e.o={},this.update=function(t,a){if(void 0!==a)if("object"==typeof a)switch(t){case"styles":var o,i=Object.keys(a);for(s=0;s<i.length;s++)o=i[s],n("#"+e.o.container).style.hasOwnProperty(o)&&(n("#"+e.o.container).style[o]=a[o])}else switch(e.o[t]=a,t){case"searchText":n("#"+e.o.container+"-atf-filtervalue").setAttribute("placeholder",e.o[t])}},this.addPagingOpt=function(t){if(void 0!==t&&("string"==typeof t||"number"==typeof t)&&(t="string"==typeof t?parseInt(t,10):t,!isNaN(t))){for(var a=n("#"+e.o.container+"-atf-paging-select"),o=a.querySelectorAll("option"),i=[],r=/^[0-9]+$/,s=!1,l=0;l<o.length;l++)!0===r.test(o[l].innerHTML.trim())&&i.push(parseInt(o[l].innerHTML,10)),"ALL"===o[l].innerHTML.toUpperCase()&&(s=!0);for(var c in i.push(t),i.sort(function(e,t){return e>t}),s&&i.push("ALL"),a.innerHTML="",i)a.innerHTML+='<option value="'+i[c]+'">'+i[c]+"</option>";if(void 0!==e.o.defaultView){var d=n("#"+e.o.container+'-atf-paging-select option[value="'+e.o.defaultView+'"]');d&&d.setAttribute("selected","selected")}}},this.removePagingOpt=function(t){if(void 0!==t&&("string"==typeof t||"number"==typeof t)){var o=n("#"+e.o.container+'-atf-paging-select option[value="'+t+'"]');if(o&&o.remove(),void 0!==e.o.defaultView&&e.o.defaultView.toString()===t.toString()){var i=a("#"+e.o.container+"-atf-paging-select option");e.o.defaultView=i[0]}}};var n=document.querySelector.bind(document),a=document.querySelectorAll.bind(document);if("object"==typeof arguments[0]&&Object.keys(arguments[0]).length){var o=arguments[0],i=["table","container","submitBy","display","includeLabel","labelText","isToggleableTable","searchText","styles","columnSelect","ignoreRows","caseSensitive","pagination","pagingViews","defaultView"],r=Object.keys(o);if(r.indexOf("table")<0)return console.log("Error: no table listed in options given to auto-table-filter.  Please at least specify the table and a container to perform filtering with."),!1;if(r.indexOf("container")<0)return console.log('Error: no container listed in options given to auto-table-filter.  Please specify a container to perform filtering with by specifying its id i.e.\ncontainer: "myContainer".'),!1;for(var s=0;s<i.length;s++){var l=o[i[s]],c=i[s];if(void 0!==l)if(["boolean","string","number"].indexOf(typeof l)>-1)e.o[c]=l;else if("object"==typeof l)if(l instanceof Array){e.o[c]=[];for(var d=0;d<l.length;d++)e.o[c].push(l[d])}else for(var f in e.o[c]={},l)e.o[c][f]=l[f]}if(!e.o.table)return console.log('Error: please make sure to specify an id for the table being filtered.  Use the same format as the id attribute in HTML i.e. a table with id="myFilteredTable" needs the table property set to "myFilteredTable".'),!1;if(n("#"+e.o.table+" > tbody").setAttribute("id",e.o.container+"-atf-tbody"),e.o.container){if(n("#"+e.o.container).classList.add("atf-filter-container"),void 0!==e.o.styles&&"object"==typeof e.o.styles){var g=Object.keys(e.o.styles);for(s=0;s<g.length;s++)n("#"+e.o.container).style.hasOwnProperty([g[s]])&&(n("#"+e.o.container).style[g[s]]=e.o.styles[g[s]])}n("#"+e.o.container).innerHTML=(void 0===e.o.includeLabel||!0===e.o.includeLabel?"<label for='atf-filtervalue'>"+(void 0!==e.o.labelText&&"string"==typeof e.o.labelText?e.o.labelText:"Search:")+"</label> &nbsp;":"")+"<input type='text' class='atf-filtervalue' id='"+e.o.container+"-atf-filtervalue' placeholder='"+(void 0===e.o.searchText||""===e.o.searchText?"Enter a value to search for":e.o.searchText)+"'>",void 0===e.o.columnSelect||!0===e.o.columnSelect?n("#"+e.o.container).innerHTML+="&nbsp; by column &nbsp; <select class='atf-filterselect' id='"+e.o.container+"-atf-filterselect'></select> &nbsp;":n("#"+e.o.container).innerHTML+="<select id='"+e.o.container+"-atf-filterselect' class='hider'></select> &nbsp;","button"===e.o.submitBy&&(n("#"+e.o.container).innerHTML+="<button class='atf-filtersubmit' id='"+e.o.container+"-atf-filtersubmit'>Submit</button>");var b=a("#"+e.o.table+" > thead > tr > th"),u="<option value='All' selected='selected'>All</option>";for(s=0;s<b.length;s++){var h=b[s].innerHTML.trim();""!==h&&(u+="<option value='"+h+"'>"+h+"</option>")}n("#"+e.o.container+"-atf-filterselect").innerHTML=u,n("#"+e.o.container).style.display=void 0!==e.o.display&&""!==e.o.display?e.o.display:"block","button"===e.o.submitBy&&n("#"+e.o.container+"-atf-filtersubmit").addEventListener("click",function(){t()},!1),n("#"+e.o.container+"-atf-filtervalue").addEventListener("keyup",function(o){if(13!==o.which||"button"!==e.o.submitBy&&e.o.submitBy||t(),8===o.which&&""===n("#"+e.o.container+"-atf-filtervalue").value){var i=a("#"+e.o.container+"-atf-tbody > tr");if(void 0===e.o.pagination)for(s=0;s<i.length;s++)i[s].classList.remove("hider");else{var r=n("#"+e.o.container+"-atf-paging-select").options[n("#"+e.o.container+"-atf-paging-select").selectedIndex].text;if("ALL"!==r){var l=parseInt(r,10),c=a(".atf-page-number-selected"),d=(parseInt(c[0].innerHTML,10)-1)*l;if(void 0!==e.o.isToggleableTable)if(!0===e.o.isToggleableTable){for(s=0;s<2*l;s++)i[s].classList.remove("hider");for(s=i.length-1;s>=2*l;s--)i[s].classList.add("hider")}else{for(s=i.length-1;s>=0;s--)i[s].classList.add("hider");for(s=d;s<d+l;s++)s!==i.length&&i[s].classList.remove("hider")}else{for(s=i.length-1;s>=0;s--)i[s].classList.add("hider");for(s=d;s<d+l;s++)s!==i.length&&i[s].classList.remove("hider")}}else for(s=i.length-1;s>=0;s--)i[s].classList.remove("hider")}}"typing"===e.o.submitBy&&""!==n("#"+e.o.container+"-atf-filtervalue").value&&t()},!1)}if(void 0!==e.o.pagination){if(!0!==e.o.pagination)return console.log("Error: pagination is set to true, but no pagingViews array was given.  Please give an array of values that correspond to the number of items to show when selected."),!1;var p=document.createElement("div");if(p.id=e.o.container+"-atf-paging-container",p.setAttribute("class","atf-paging-container"),n("#"+e.o.container).insertAdjacentElement("afterend",p),void 0!==e.o.pagingViews){if(e.o.pagingViews.length<1)return console.log("Error: pagination is set to true, but the pagingViews array was empty.  Please give an array of number values that correspond to the number of items to show when selected (and/or an optional 'ALL' view)."),!1;var v=document.createElement("label");v.innerHTML="Show Records: &nbsp;&nbsp;&nbsp;",v.id=e.o.container+"-atf-paging-label",v.setAttribute("for","atf-paging-select"),n("#"+e.o.container+"-atf-paging-container").insertAdjacentElement("beforeend",v);var m,y=document.createElement("select");y.id=e.o.container+"-atf-paging-select",y.setAttribute("class","atf-paging-select"),n("#"+e.o.container+"-atf-paging-label").insertAdjacentElement("afterend",y);for(var L=0;L<e.o.pagingViews.length;L++){var w=document.createElement("option");w.innerHTML=e.o.pagingViews[L],w.value=e.o.pagingViews[L],n("#"+e.o.container+"-atf-paging-select").insertAdjacentElement("beforeend",w)}void 0!==e.o.defaultView&&("string"==typeof e.o.defaultView&&"ALL"!==e.o.defaultView&&(e.o.defaultView=parseInt(e.o.defaultView,10)),"ALL"===e.o.defaultView?(m=n("#"+e.o.container+'-atf-paging-select option[value="ALL"]'))&&m.setAttribute("selected","selected"):(e.o.pagingViews.indexOf(e.o.defaultView)<0&&(e.o.defaultView=e.o.pagingViews[0]),(m=n("#"+e.o.container+'-atf-paging-select option[value="'+e.o.defaultView+'"]'))&&m.setAttribute("selected","selected")));var T=n("#"+e.o.container+"-atf-paging-select").options[n("#"+e.o.container+"-atf-paging-select").selectedIndex].text,E=parseInt(T,10),A=a("#"+e.o.container+"-atf-tbody > tr");e:for(var k=0;k<A.length;k++){if(void 0!==e.o.ignoreRows&&"object"==typeof e.o.ignoreRows)for(var M=A[k].classList,H=0;H<e.o.ignoreRows.length;H++)if(M.contains(e.o.ignoreRows[H]))continue e;if("ALL"===T)break;void 0!==e.o.isToggleableTable&&!0===e.o.isToggleableTable?(k>=2*E&&A[k].classList.add("hider"),k++):k>=E&&A[k].classList.add("hider")}var V=(A=a("#"+e.o.container+"-atf-tbody > tr:not(.is-hidden)")).length,O=Math.ceil(V/E),S=document.createElement("div");S.style.display="inline-block",S.classList.add("atf-paging-number-container"),S.id=e.o.container+"-atf-paging-number-container",p.insertAdjacentElement("beforeend",S);for(var x=0;x<O;x++){var j=document.createElement("span");j.classList.add("atf-page-number"),0===x&&j.classList.add("atf-page-number-selected"),j.innerHTML=(x+1).toString(),S.insertAdjacentElement("beforeend",j)}var I=a(".atf-page-number");for(x=0;x<I.length;x++)I[x].addEventListener("click",function(){for(var t=0;t<I.length;t++)I[t].classList.remove("atf-page-number-selected");this.classList.add("atf-page-number-selected");for(var n=parseInt(this.innerHTML,10),o=(n-1)*E,i=n*E-1,r=(A=a("#"+e.o.container+"-atf-tbody > tr:not(.is-hidden)")).length-1;r>=0;r--)r>o-1&&r<i+1?A[r].classList.remove("hider"):A[r].classList.add("hider")});n("#"+e.o.container+"-atf-paging-select").addEventListener("change",function(){for(var t=this.options[this.selectedIndex].text,o=parseInt(t,10),i=a("#"+e.o.container+"-atf-tbody > tr"),r=0;r<i.length;r++)i[r].classList.remove("hider");e:for(r=0;r<i.length;r++){if(void 0!==e.o.ignoreRows&&"object"==typeof e.o.ignoreRows)for(var s=i[r].classList,l=0;l<e.o.ignoreRows.length;l++)if(s.contains(e.o.ignoreRows[l]))continue e;if("ALL"===t)break;void 0!==e.o.isToggleableTable&&!0===e.o.isToggleableTable?(r>=2*o&&i[r].classList.add("hider"),r++):r>=o&&i[r].classList.add("hider")}var c=n("#"+e.o.container+"-atf-paging-number-container");c.parentNode.removeChild(c);var d=(i=a("#"+e.o.container+"-atf-tbody > tr:not(.is-hidden)")).length,f=Math.ceil(d/o),g=document.createElement("div");g.style.display="inline-block",g.classList.add("atf-paging-number-container"),g.id=e.o.container+"-atf-paging-number-container",p.insertAdjacentElement("beforeend",g);for(var b=0;b<f;b++){var u=document.createElement("span");u.classList.add("atf-page-number"),0===b&&u.classList.add("atf-page-number-selected"),u.innerHTML=(b+1).toString(),g.insertAdjacentElement("beforeend",u)}var h=a(".atf-page-number");for(b=0;b<h.length;b++)h[b].addEventListener("click",function(){for(var t=0;t<h.length;t++)h[t].classList.remove("atf-page-number-selected");this.classList.add("atf-page-number-selected");for(var n=parseInt(this.innerHTML,10),r=(n-1)*o,s=n*o-1,l=(i=a("#"+e.o.container+"-atf-tbody > tr:not(.is-hidden)")).length-1;l>=0;l--)l>r-1&&l<s+1?i[l].classList.remove("hider"):i[l].classList.add("hider")})})}}}else if("object"!=typeof arguments[0]||void 0===arguments[0])console.log('Error: make sure to pass in a set of {} surrounding your properties like so:\natf({\n  table: "myTable",\n  container: "myContainer",\n  submitBy: "typing"\n});');else if(Object.keys(arguments[0]).length<1)return console.log('Error: no properties listed in the options object given to auto-table-filter.  Please at least specify the table, a container, and submitBy for filtering elements to perform filtering with. Remember to set these to the id values for the elements the same as the HTML id attribute i.e. a table with the id of "myFilteredTable" needs to have "myFilteredTable" passed to auto-table-filter as the table id and same with any other element based options.'),!1}atf_styles.COOLBLUE={background:"#357ebd",color:"white"},atf_styles.BLUESKIES={background:"linear-gradient(to right, #56ccf2, #2f80ed)",color:"white"},atf_styles.CLEARBLACK={background:"none",color:"black"},atf_styles.CLEARWHITE={background:"none",color:"white"},atf_styles.DEEPSEASPACE={background:"linear-gradient(to right, #2c3e50, #4ca1af)",color:"white"},atf_styles.HYDROGEN={background:"linear-gradient(to right, #667db6, #0082c8, #0082c8, #667db6)",color:"white"},atf_styles.LAWRENCIUM={background:"linear-gradient(to right, #0f0c29, #302b63, #24243e)",color:"white"},atf_styles.MILD={background:"linear-gradient(to right, #67b26f, #4ca2cd)",color:"white"},atf_styles.MOONPURPLE={background:"linear-gradient(to right, #4e54c8, #8f94fb)",color:"white"},atf_styles.MOSS={background:"linear-gradient(to right, #134e5e, #71b280)",color:"white"},atf_styles.ONYX={background:"linear-gradient(to bottom, #414345, #232526)",color:"white"},atf_styles.RAINBOWBLUE={background:"linear-gradient(to right, #00f260, #0575e6)",color:"white"},atf_styles.STRIPE={background:"linear-gradient(to right, #1fa2ff, #12d8fa, #a6ffcb)",color:"white"},atf_styles.VENICE={background:"linear-gradient(to right, #6190e8, #a7bfe8)",color:"white"};